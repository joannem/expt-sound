<html>
<head>
	<title>Spectrogram</title>
	<link rel="stylesheet" type="text/css" href="spectrogram.css">
</head>
<body>
	<br><br>
	<div id="spectrogram">
		<canvas id="spectrogram-canvas"></canvas>
		<!-- try drawing with D3 here -->
	</div>

	<br>

	<div id="drop">
		<h2>drag and drop here!</h2>
	</div>

	<div id="controls">
		<button class="play-pause-btn">play</button>
	</div>

</body>

<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="js/playback.js"></script>
<script type="text/javascript" src="js/dragAndDropFileLoader.js"></script>
<script type="text/javascript" src="js/chroma.js"></script>
<script type="text/javascript" src="js/fft.js"></script>
<script type="text/javascript" src="js/visualisations.js"></script>

<script type="text/javascript">
	var audioCtx = new AudioContext();
	var soundData = null;
	var soundFFT = [];

	// set-up FFT values
	var logN = 10;		// 2^10 = 1024
	var windowSize = 1 << logN;
	var overlap = 0.5;

	// set-up fft calculator
	var fft = new FFT();
	fft.init(logN);

	setupBlankSpectrogramCanvas();

	function setupVisualisations() {
		var noOfFrames = Math.floor(soundData.length / (overlap * windowSize)) - 1;	// discard the last frame
		var maxMagnitude = calculateFft(soundData, windowSize, noOfFrames);
	
		drawSpectrogram(noOfFrames, (windowSize/2 + 1), maxMagnitude);

	}	

</script>
</html>